language: c
os: linux
dist: xenial
addons:
  apt:
    packages:
      - build-essential
      - cmake
      - libgmp3-dev
      - gengetopt
      - libpcap-dev
      - flex
      - byacc
      - libjson-c-dev
      - pkg-config
      - libunistring-dev
      - libsasl2-dev
      - python-dev
      - python-pip
      - libhiredis-dev
before_install:
  - pip install --user sh
  - export PATH=/opt/bin:$PATH
before_script:
  - wget -O - https://apt.llvm.org/llvm-snapshot.gpg.key|sudo apt-key add -
  - echo "deb http://apt.llvm.org/trusty/ llvm-toolchain-trusty-6.0 main" | sudo tee -a /etc/apt/sources.list
  - sudo add-apt-repository -y ppa:ubuntu-toolchain-r/test
  - sudo apt-get update -qq
  - sudo apt-get install libstdc++-4.9-dev libllvm6.0 clang-format-6.0
script:
  - mkdir __build
  - cd __build
  - cmake -DENABLE_DEVELOPMENT=ON -DWITH_JSON=ON -DWITH_REDIS=ON $TRAVIS_BUILD_DIR
  - make
  - cd $TRAVIS_BUILD_DIR
  - python ./scripts/check_manfile.py
compiler: clang
notifications:
  email:
    - idealeer521@gmail.com
  slack:
    secure: Vmwr7Hqxqgrbb51vcGDO5tdYzj/UmvRz2Mgu7mWO0kRxmBQdzBG/VpvEfqMKiTKHNZoYPY2MJcBcmuM6MOmi27R7sfYPrQ7YsIR+R0MH+5lm6BeQsz6vBMEPVJwLPYxGI28nIrBE6VnW+siw7skCvbVrLK7MZmY3SEEU51I6tqxz4VT4lKXTnwBFRUYPKPQSKe074tMOqlZzAECo2tz13KPt8XUDUKRtoCxdwz1e2HZfn11Kf85V4wsLBLR/v1nArCCBu7byS4dQjUheZb0J31F53hPQX8hHJn54b4YFqaD3MgFjWEsxdtft4Bw2ShETaBs7VVNXCyj+ZcdBv5jiWYKhSLCV4dQ8ToeBm9NtkT+6JpjW8CJt1ZDnDbg2McGzxl0Iy4x4YWTOzTNxycVC0CD9DYXXOl9/wOAKBBjmEXdkmh03fIBiizTELTDsg5Q62aaLCq3Wm555UXC50Ajt6JgFcQeiR5OrwB0a/xerBFsCa2DTMXcVhpm4Tfk+e0iK7x0IajU0HPPj1apE7M0EzluQxH3EmZr66Q8omnC+9h134zifXNrgbt471hhbtnaHKKKRVrQv8GIEhOQaRUzi8KuO8IUrAhwI+MchgD4oRJI+wN8tmXTjEJ3ayoWiNGMhAcSl1Jng3/4kRegZtAVmM4HQ/NN9WW5+Fn6nqwV6DzI=
